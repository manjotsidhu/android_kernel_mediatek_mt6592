#ifndef _CUST_BATTERY_METER_TABLE_H
#define _CUST_BATTERY_METER_TABLE_H

#include <mach/mt_typedefs.h>

// ============================================================
// define
// ============================================================
#define BAT_NTC_10 1
#define BAT_NTC_47 0

#if (BAT_NTC_10 == 1)
#define RBAT_PULL_UP_R             16900	
#define RBAT_PULL_DOWN_R		   27000	
#endif

#if (BAT_NTC_47 == 1)
#define RBAT_PULL_UP_R             61900	
#define RBAT_PULL_DOWN_R		  100000	
#endif
#define RBAT_PULL_UP_VOLT          1800



// ============================================================
// ENUM
// ============================================================

// ============================================================
// structure
// ============================================================

// ============================================================
// typedef
// ============================================================
typedef struct _BATTERY_PROFILE_STRUC
{
    kal_int32 percentage;
    kal_int32 voltage;
} BATTERY_PROFILE_STRUC, *BATTERY_PROFILE_STRUC_P;

typedef struct _R_PROFILE_STRUC
{
    kal_int32 resistance; // Ohm
    kal_int32 voltage;
} R_PROFILE_STRUC, *R_PROFILE_STRUC_P;

typedef enum
{
    T1_0C,
    T2_25C,
    T3_50C
} PROFILE_TEMPERATURE;

// ============================================================
// External Variables
// ============================================================

// ============================================================
// External function
// ============================================================

// ============================================================
// <DOD, Battery_Voltage> Table
// ============================================================
#if (BAT_NTC_10 == 1)
    BATT_TEMPERATURE Batt_Temperature_Table[] = {
        {-20,67790},
        {-15,53460},
        {-10,42450},
        { -5,33930},
        {  0,27280},
        {  5,22070},
        { 10,17960},
        { 15,14700},
        { 20,12090},
        { 25,10000},
        { 30,8312},
        { 35,6942},
        { 40,5826},
        { 45,4911},
        { 50,4158},
        { 55,3536},
        { 60,3019}
    };
#endif

#if (BAT_NTC_47 == 1)
    BATT_TEMPERATURE Batt_Temperature_Table[] = {
        {-20,483954},
        {-15,360850},
        {-10,271697},
        { -5,206463},
        {  0,158214},
        {  5,122259},
        { 10,95227},
        { 15,74730},
        { 20,59065},
        { 25,47000},
        { 30,37643},
        { 35,30334},
        { 40,24591},
        { 45,20048},
        { 50,16433},
        { 55,13539},
        { 60,11210}        
    };
#endif

// T0 -10C
BATTERY_PROFILE_STRUC battery_profile_t0[] =
{
	{0	 , 4307},
	{2	 , 4285},
	{4	 , 4267},
	{6	 , 4249},
	{8	 , 4231},
	{10  , 4212},
	{12  , 4192},
	{15  , 4171},
	{17  , 4147},
	{19  , 4118},
	{21  , 4086},
	{23  , 4059},
	{25  , 4031},
	{27  , 4001},
	{29  , 3976},
	{31  , 3954},
	{33  , 3936},
	{35  , 3922},
	{37  , 3910},
	{39  , 3901},
	{41  , 3893},
	{44  , 3883},
	{46  , 3876},
	{48  , 3868},
	{50  , 3860},
	{52  , 3853},
	{54  , 3846},
	{56  , 3839},
	{58  , 3832},
	{60  , 3825},
	{62  , 3819},
	{64  , 3812},
	{66  , 3806},
	{68  , 3800},
	{70  , 3794},
	{73  , 3788},
	{75  , 3782},
	{77  , 3773},
	{79  , 3765},
	{81  , 3755},
	{82  , 3747},
	{84  , 3741},
	{85  , 3734},
	{86  , 3730},
	{86  , 3725},
	{87  , 3721},
	{88  , 3717},
	{89  , 3715},
	{89  , 3713},
	{90  , 3712},
	{91  , 3711},
	{91  , 3710},
	{92  , 3708},
	{92  , 3708},
	{93  , 3707},
	{93  , 3706},
	{94  , 3706},
	{94  , 3705},
	{95  , 3704},
	{95  , 3703},
	{96  , 3702},
	{96  , 3701},
	{97  , 3701},
	{97  , 3700},
	{97  , 3699},
	{98  , 3698},
	{98  , 3696},
	{98  , 3695},
	{99  , 3693},
	{99  , 3692},
	{99  , 3689},
	{99  , 3687},
	{100 , 3400}
		       
};      
        
// T1 0C 
BATTERY_PROFILE_STRUC battery_profile_t1[] =
{
	{0	, 4326},
	{2	, 4301},
	{3	, 4270},
	{5	, 4235},
	{6	, 4203},
	{8	, 4179},
	{10 , 4162},
	{11 , 4145},
	{13 , 4129},
	{15 , 4114},
	{16 , 4100},
	{18 , 4090},
	{19 , 4082},
	{21 , 4069},
	{23 , 4045},
	{24 , 4016},
	{26 , 3994},
	{28 , 3977},
	{29 , 3964},
	{31 , 3955},
	{32 , 3945},
	{34 , 3935},
	{36 , 3923},
	{37 , 3910},
	{39 , 3897},
	{41 , 3885},
	{42 , 3873},
	{44 , 3862},
	{45 , 3854},
	{47 , 3846},
	{49 , 3839},
	{50 , 3833},
	{52 , 3826},
	{54 , 3820},
	{55 , 3815},
	{57 , 3809},
	{58 , 3804},
	{60 , 3800},
	{62 , 3797},
	{63 , 3792},
	{65 , 3789},
	{67 , 3787},
	{68 , 3784},
	{70 , 3782},
	{71 , 3779},
	{73 , 3776},
	{75 , 3773},
	{76 , 3768},
	{78 , 3761},
	{79 , 3754},
	{81 , 3744},
	{83 , 3733},
	{84 , 3721},
	{86 , 3710},
	{88 , 3704},
	{89 , 3700},
	{91 , 3697},
	{92 , 3694},
	{94 , 3690},
	{96 , 3677},
	{97 , 3652},
	{98 , 3620},
	{98 , 3590},
	{99 , 3565},
	{99 , 3543},
	{99 , 3528},
	{99 , 3515},
	{100, 3400},
	{100, 3400},
	{100, 3400},
	{100, 3400},
	{100, 3400},
	{100, 3400}
		       
};           

// T2 25C
BATTERY_PROFILE_STRUC battery_profile_t2[] =
{
	{0	 , 4332},
	{1	 , 4310},
	{3	 , 4292},
	{4	 , 4274},
	{6	 , 4257},
	{7	 , 4240},
	{9	 , 4224},
	{10  , 4208},
	{12  , 4192},
	{13  , 4177},
	{14  , 4161},
	{16  , 4146},
	{17  , 4131},
	{19  , 4116},
	{20  , 4100},
	{22  , 4087},
	{23  , 4077},
	{25  , 4071},
	{26  , 4055},
	{28  , 4030},
	{29  , 4007},
	{30  , 3991},
	{32  , 3979},
	{33  , 3973},
	{35  , 3967},
	{36  , 3959},
	{38  , 3950},
	{39  , 3939},
	{41  , 3927},
	{42  , 3914},
	{43  , 3898},
	{45  , 3881},
	{46  , 3869},
	{48  , 3858},
	{49  , 3849},
	{51  , 3841},
	{52  , 3834},
	{54  , 3828},
	{55  , 3821},
	{57  , 3815},
	{58  , 3810},
	{59  , 3806},
	{61  , 3800},
	{62  , 3796},
	{64  , 3793},
	{65  , 3788},
	{67  , 3785},
	{68  , 3782},
	{70  , 3779},
	{71  , 3776},
	{72  , 3773},
	{74  , 3771},
	{75  , 3768},
	{77  , 3764},
	{78  , 3758},
	{80  , 3751},
	{81  , 3746},
	{83  , 3739},
	{84  , 3725},
	{86  , 3714},
	{87  , 3698},
	{88  , 3693},
	{90  , 3690},
	{91  , 3690},
	{93  , 3688},
	{94  , 3686},
	{96  , 3672},
	{97  , 3610},
	{99  , 3513},
	{100 , 3400},
	{100 , 3400},
	{100 , 3400},
	{100 , 3400}
		       
};     

// T3 50C
BATTERY_PROFILE_STRUC battery_profile_t3[] =
{
	{0	 , 4340},
	{1	 , 4321},
	{3	 , 4304},
	{4	 , 4287},
	{6	 , 4270},
	{7	 , 4254},
	{9	 , 4237},
	{10  , 4221},
	{12  , 4205},
	{13  , 4190},
	{14  , 4174},
	{16  , 4158},
	{17  , 4144},
	{19  , 4128},
	{20  , 4113},
	{22  , 4098},
	{23  , 4084},
	{25  , 4070},
	{26  , 4056},
	{27  , 4043},
	{29  , 4030},
	{30  , 4015},
	{32  , 4004},
	{33  , 3992},
	{35  , 3981},
	{36  , 3969},
	{38  , 3959},
	{39  , 3948},
	{41  , 3938},
	{42  , 3927},
	{43  , 3915},
	{45  , 3896},
	{46  , 3877},
	{48  , 3865},
	{49  , 3855},
	{51  , 3848},
	{52  , 3840},
	{53  , 3833},
	{55  , 3826},
	{56  , 3820},
	{58  , 3814},
	{59  , 3809},
	{61  , 3804},
	{62  , 3799},
	{64  , 3795},
	{65  , 3791},
	{67  , 3787},
	{68  , 3783},
	{69  , 3780},
	{71  , 3776},
	{72  , 3766},
	{74  , 3757},
	{75  , 3753},
	{77  , 3749},
	{78  , 3742},
	{80  , 3736},
	{81  , 3730},
	{82  , 3726},
	{84  , 3716},
	{85  , 3704},
	{87  , 3691},
	{88  , 3679},
	{90  , 3677},
	{91  , 3677},
	{93  , 3676},
	{94  , 3674},
	{95  , 3669},
	{97  , 3628},
	{98  , 3551},
	{100 , 3400},
	{100 , 3400},
	{100 , 3400},
	{100 , 3400}
		       
};           

// battery profile for actual temperature. The size should be the same as T1, T2 and T3
BATTERY_PROFILE_STRUC battery_profile_temperature[] =
{  
  {0  , 0 },
  {0  , 0 },
  {0  , 0 },
  {0  , 0 },
  {0  , 0 },
  {0  , 0 },
  {0  , 0 },
  {0  , 0 },
  {0  , 0 },
  {0  , 0 },
  {0  , 0 },
  {0  , 0 },
  {0  , 0 },
  {0  , 0 },
  {0  , 0 },
  {0  , 0 },
  {0  , 0 },
  {0  , 0 },
  {0  , 0 },
  {0  , 0 },
  {0  , 0 },
  {0  , 0 },
  {0  , 0 },
  {0  , 0 },
  {0  , 0 },
  {0  , 0 },
  {0  , 0 },
  {0  , 0 },
  {0  , 0 },
  {0  , 0 },
  {0  , 0 },
  {0  , 0 },
  {0  , 0 },
  {0  , 0 },
  {0  , 0 },
  {0  , 0 },
  {0  , 0 },
  {0  , 0 },
  {0  , 0 },
  {0  , 0 },
  {0  , 0 },
  {0  , 0 },
  {0  , 0 },
  {0  , 0 },
  {0  , 0 },
  {0  , 0 },
  {0  , 0 },
  {0  , 0 },
  {0  , 0 },
  {0  , 0 },
  {0  , 0 },
  {0  , 0 },
  {0  , 0 },
  {0  , 0 },
  {0  , 0 },
  {0  , 0 },
  {0  , 0 },
  {0  , 0 },
  {0  , 0 },
  {0  , 0 },
  {0  , 0 },
  {0  , 0 },
  {0  , 0 },
  {0  , 0 },
  {0  , 0 },
  {0  , 0 },
  {0  , 0 },
  {0  , 0 },
  {0  , 0 },
  {0  , 0 },
  {0  , 0 },
  {0  , 0 },
  {0  , 0 }
};    

// ============================================================
// <Rbat, Battery_Voltage> Table
// ============================================================
// T0 -10C
R_PROFILE_STRUC r_profile_t0[] =
{
	{855  ,  4307},
	{855  ,  4285},
	{880  ,  4267},
	{890  ,  4249},
	{893  ,  4231},
	{898  ,  4212},
	{903  ,  4192},
	{920  ,  4171},
	{958  ,  4147},
	{1023 ,  4118},
	{1103 ,  4086},
	{1188 ,  4059},
	{1248 ,  4031},
	{1268 ,  4001},
	{1263 ,  3976},
	{1255 ,  3954},
	{1253 ,  3936},
	{1253 ,  3922},
	{1250 ,  3910},
	{1253 ,  3901},
	{1258 ,  3893},
	{1258 ,  3883},
	{1260 ,  3876},
	{1258 ,  3868},
	{1260 ,  3860},
	{1265 ,  3853},
	{1275 ,  3846},
	{1273 ,  3839},
	{1280 ,  3832},
	{1288 ,  3825},
	{1295 ,  3819},
	{1298 ,  3812},
	{1308 ,  3806},
	{1313 ,  3800},
	{1323 ,  3794},
	{1328 ,  3788},
	{1343 ,  3782},
	{1358 ,  3773},
	{1375 ,  3765},
	{1388 ,  3755},
	{1370 ,  3747},
	{1353 ,  3741},
	{1335 ,  3734},
	{1328 ,  3730},
	{1313 ,  3725},
	{1305 ,  3721},
	{1293 ,  3717},
	{1290 ,  3715},
	{1283 ,  3713},
	{1280 ,  3712},
	{1280 ,  3711},
	{1275 ,  3710},
	{1273 ,  3708},
	{1270 ,  3708},
	{1270 ,  3707},
	{1265 ,  3706},
	{1265 ,  3706},
	{1265 ,  3705},
	{1260 ,  3704},
	{1260 ,  3703},
	{1258 ,  3702},
	{1255 ,  3701},
	{1255 ,  3701},
	{1250 ,  3700},
	{1248 ,  3699},
	{1248 ,  3698},
	{1243 ,  3696},
	{1240 ,  3695},
	{1235 ,  3693},
	{1235 ,  3692},
	{1225 ,  3689},
	{1220 ,  3687},
	{1213 ,  3400}
		       
};      

// T1 0C
R_PROFILE_STRUC r_profile_t1[] =
{
	{430  , 4326},
	{430  , 4301},
	{453  , 4270},
	{495  , 4235},
	{563  , 4203},
	{620  , 4179},
	{640  , 4162},
	{645  , 4145},
	{648  , 4129},
	{650  , 4114},
	{658  , 4100},
	{673  , 4090},
	{693  , 4082},
	{695  , 4069},
	{678  , 4045},
	{665  , 4016},
	{665  , 3994},
	{668  , 3977},
	{668  , 3964},
	{673  , 3955},
	{675  , 3945},
	{675  , 3935},
	{665  , 3923},
	{658  , 3910},
	{648  , 3897},
	{645  , 3885},
	{638  , 3873},
	{635  , 3862},
	{638  , 3854},
	{643  , 3846},
	{645  , 3839},
	{650  , 3833},
	{655  , 3826},
	{658  , 3820},
	{665  , 3815},
	{668  , 3809},
	{673  , 3804},
	{678  , 3800},
	{685  , 3797},
	{690  , 3792},
	{693  , 3789},
	{700  , 3787},
	{708  , 3784},
	{720  , 3782},
	{733  , 3779},
	{750  , 3776},
	{765  , 3773},
	{778  , 3768},
	{795  , 3761},
	{815  , 3754},
	{833  , 3744},
	{853  , 3733},
	{875  , 3721},
	{900  , 3710},
	{925  , 3704},
	{955  , 3700},
	{998  , 3697},
	{1048 , 3694},
	{1125 , 3690},
	{1195 , 3677},
	{1135 , 3652},
	{1050 , 3620},
	{980  , 3590},
	{913  , 3565},
	{863  , 3543},
	{823  , 3528},
	{793  , 3515},
	{765  , 3400},
	{765  , 3400},
	{765  , 3400},
	{765  , 3400},
	{765  , 3400},
	{765  , 3400}
		       
};     

// T2 25C
R_PROFILE_STRUC r_profile_t2[] =
{
	{235 , 4332},
	{215 , 4310},
	{220 , 4292},
	{220 , 4274},
	{220 , 4257},
	{220 , 4240},
	{223 , 4224},
	{220 , 4208},
	{223 , 4192},
	{223 , 4177},
	{223 , 4161},
	{225 , 4146},
	{230 , 4131},
	{233 , 4116},
	{230 , 4100},
	{233 , 4087},
	{245 , 4077},
	{258 , 4071},
	{253 , 4055},
	{245 , 4030},
	{250 , 4007},
	{253 , 3991},
	{255 , 3979},
	{265 , 3973},
	{270 , 3967},
	{268 , 3959},
	{268 , 3950},
	{270 , 3939},
	{265 , 3927},
	{260 , 3914},
	{248 , 3898},
	{230 , 3881},
	{223 , 3869},
	{218 , 3858},
	{215 , 3849},
	{213 , 3841},
	{213 , 3834},
	{215 , 3828},
	{213 , 3821},
	{215 , 3815},
	{215 , 3810},
	{220 , 3806},
	{218 , 3800},
	{220 , 3796},
	{223 , 3793},
	{220 , 3788},
	{220 , 3785},
	{223 , 3782},
	{223 , 3779},
	{223 , 3776},
	{223 , 3773},
	{223 , 3771},
	{223 , 3768},
	{223 , 3764},
	{223 , 3758},
	{220 , 3751},
	{223 , 3746},
	{228 , 3739},
	{223 , 3725},
	{225 , 3714},
	{223 , 3698},
	{228 , 3693},
	{220 , 3690},
	{225 , 3690},
	{233 , 3688},
	{248 , 3686},
	{263 , 3672},
	{265 , 3610},
	{305 , 3513},
	{253 , 3400},
	{253 , 3400},
	{253 , 3400},
	{253 , 3400}
		       
}; 

// T3 50C
R_PROFILE_STRUC r_profile_t3[] =
{
	{140  , 4340},
	{140  , 4321},
	{143  , 4304},
	{143  , 4287},
	{143  , 4270},
	{145  , 4254},
	{145  , 4237},
	{145  , 4221},
	{148  , 4205},
	{150  , 4190},
	{150  , 4174},
	{150  , 4158},
	{153  , 4144},
	{150  , 4128},
	{153  , 4113},
	{155  , 4098},
	{155  , 4084},
	{158  , 4070},
	{158  , 4056},
	{160  , 4043},
	{165  , 4030},
	{163  , 4015},
	{168  , 4004},
	{168  , 3992},
	{173  , 3981},
	{173  , 3969},
	{180  , 3959},
	{183  , 3948},
	{190  , 3938},
	{193  , 3927},
	{190  , 3915},
	{170  , 3896},
	{153  , 3877},
	{148  , 3865},
	{143  , 3855},
	{145  , 3848},
	{145  , 3840},
	{145  , 3833},
	{145  , 3826},
	{145  , 3820},
	{148  , 3814},
	{148  , 3809},
	{150  , 3804},
	{150  , 3799},
	{153  , 3795},
	{155  , 3791},
	{158  , 3787},
	{158  , 3783},
	{163  , 3780},
	{160  , 3776},
	{150  , 3766},
	{143  , 3757},
	{148  , 3753},
	{150  , 3749},
	{145  , 3742},
	{145  , 3736},
	{145  , 3730},
	{153  , 3726},
	{150  , 3716},
	{150  , 3704},
	{150  , 3691},
	{145  , 3679},
	{145  , 3677},
	{153  , 3677},
	{158  , 3676},
	{165  , 3674},
	{178  , 3669},
	{168  , 3628},
	{180  , 3551},
	{215  , 3400},
	{215  , 3400},
	{215  , 3400},
	{215  , 3400}
		       
}; 

// r-table profile for actual temperature. The size should be the same as T1, T2 and T3
R_PROFILE_STRUC r_profile_temperature[] =
{
  
  {0  , 0 },
  {0  , 0 },
  {0  , 0 },
  {0  , 0 },
  {0  , 0 },
  {0  , 0 },
  {0  , 0 },
  {0  , 0 },
  {0  , 0 },
  {0  , 0 },
  {0  , 0 },
  {0  , 0 },
  {0  , 0 },
  {0  , 0 },
  {0  , 0 },
  {0  , 0 },
  {0  , 0 },
  {0  , 0 },
  {0  , 0 },
  {0  , 0 },
  {0  , 0 },
  {0  , 0 },
  {0  , 0 },
  {0  , 0 },
  {0  , 0 },
  {0  , 0 },
  {0  , 0 },
  {0  , 0 },
  {0  , 0 },
  {0  , 0 },
  {0  , 0 },
  {0  , 0 },
  {0  , 0 },
  {0  , 0 },
  {0  , 0 },
  {0  , 0 },
  {0  , 0 },
  {0  , 0 },
  {0  , 0 },
  {0  , 0 },
  {0  , 0 },
  {0  , 0 },
  {0  , 0 },
  {0  , 0 },
  {0  , 0 },
  {0  , 0 },
  {0  , 0 },
  {0  , 0 },
  {0  , 0 },
  {0  , 0 },
  {0  , 0 },
  {0  , 0 },
  {0  , 0 },
  {0  , 0 },
  {0  , 0 },
  {0  , 0 },
  {0  , 0 },
  {0  , 0 },
  {0  , 0 },
  {0  , 0 },
  {0  , 0 },
  {0  , 0 },
  {0  , 0 },
  {0  , 0 },
  {0  , 0 },
  {0  , 0 },
  {0  , 0 },
  {0  , 0 },
  {0  , 0 },
  {0  , 0 },
  {0  , 0 },
  {0  , 0 },
  {0  , 0 }
};    

// ============================================================
// function prototype
// ============================================================
int fgauge_get_saddles(void);
BATTERY_PROFILE_STRUC_P fgauge_get_profile(kal_uint32 temperature);

int fgauge_get_saddles_r_table(void);
R_PROFILE_STRUC_P fgauge_get_profile_r_table(kal_uint32 temperature);

#endif	//#ifndef _CUST_BATTERY_METER_TABLE_H

